<html>

    <head>
        <meta charset="utf-8">
        <title>webview测试音频</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
        <link rel="stylesheet" href="../css/style.css">
    </head>
    <body>

        <div style="margin:0 15px;">测试背景音频，退后台音频应该静音</div>
        <h1>video</h1>
        <video width="100%" controls="" playsinline="" src="http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400"></video>
        
        <h1>audio</h1>
        <figure>
            <audio controls="" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">
                    Your browser does not support the
                    <code>audio</code> element.
            </audio>
        </figure>
        
        <h1>video via api</h1>
        <button id="videoBtn" class="btn btn_primary">play video</button>
        
        <h1>audio via api</h1>
        <button id="audioBtn" class="btn btn_primary">play audio</button>
        
        <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
        <script>
        
        function playVideo() {
            var video = document.createElement('video')
            video.src = 'https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-mp4-file.mp4'
            video.playsinline = true
            video.constrols = true
            
            video.play()
        }
        
        function playAudio() {
            var audio = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3')
            audio.play()
        }
        
        var videoBtn = document.querySelector('#videoBtn')
        var audioBtn = document.querySelector('#audioBtn')
        
        videoBtn.addEventListener('click', () => {
            console.log('video button clicked')
            playVideo()
        })
        
        audioBtn.addEventListener('click', () => {
            console.log('audio button clicked')
            playAudio()
        })
            
        WeixinJSBridge.on('onPageStateChange', (res) => {
            console.log('res is active', res.active)
            alert('res is active: ' + res.active)
        })
        
        </script>
    
    
    
    </body>
</html>