<html>

    <head>
        <title>test background audio</title>
        <link rel="stylesheet" href="../css/style.css">
    </head>
    <body>

        <div>测试背景音频，退后台音频应该静音</div>
        <h1>video</h1>
        <video width="500" height="300" controls="" playsinline="" src="https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-mp4-file.mp4"></video>
        
        <h1>audio</h1>
        <figure>
            <audio controls="" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">
                    Your browser does not support the
                    <code>audio</code> element.
            </audio>
        </figure>
        
        <h1>video via api</h1>
        <button id="videoBtn" class="btn btn_primary">play video</button>
        
        <h1>audio via api</h1>
        <button id="audioBtn" class="btn btn_primary">play audio</button>
        
        <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
        <script>
        
        function playVideo() {
            var video = document.createElement('video')
            video.src = 'https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-mp4-file.mp4'
            video.playsinline = true
            video.constrols = true
            
            video.play()
        }
        
        function playAudio() {
            var audio = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3')
            audio.play()
        }
        
        var videoBtn = document.querySelector('#videoBtn')
        var audioBtn = document.querySelector('#audioBtn')
        
        videoBtn.addEventListener('click', () => {
            console.log('video button clicked')
            playVideo()
        })
        
        audioBtn.addEventListener('click', () => {
            console.log('audio button clicked')
            playAudio()
        })
            
        WeixinJSBridge.on('onPageStateChange', (res) => {
            console.log('res is active', res.active)
            alert('res is active: ' + res.active)
        })
        
        </script>
    
    
    
    </body>
</html>